package entity;

import entity.Entity;

public class Mob extends Entity {

	public void move(double xa, double za, double rot, double walkSpeed) {

		/**
		 * seems useless
		 */
//		if(xa != 0 && za != 0) {
//			move(xa, 0, rot);
//			move(0, za, rot);
//			return;
//		}
		
		double nx =( xa * Math.cos(rot) + za * Math.sin(rot) )* walkSpeed;
		double nz =( za * Math.cos(rot) - xa * Math.sin(rot) )* walkSpeed;
		nx *= 1.1;//¦ì²¾
		nz *= 1.1;//¦ì²¾
		
		
		int xSteps = (int) (Math.abs(nx) + 1);
		for (int i = xSteps; i > 0; i--) {
			double xxa = nx / 100.0;
			
			if (isFree(x + xxa * i / xSteps, z)) {
				x += xxa*100 * i / xSteps;
				break;
			} else {
				nx = 0;
			}
		}
		
		int zSteps = (int) (Math.abs(nz) + 1);
		//System.out.println("zSteps = "+zSteps);
		for (int i = zSteps; i > 0; i--) {
			double zza = nz / 100.0;
			if (isFree(x, z + zza * i / zSteps)) {
				System.out.println(nz);
				z += zza*100 * i / zSteps;
				break;
			} else {
				nz = 0;
			}
		}
		
		
		//x += nx;
		//z += nz;		
		//System.out.println(nx);

	}

}
